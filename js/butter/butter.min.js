!function(root){var Butter=function(){var self=this;this.defaults={wrapperId:"butter",wrapperDamper:.07,cancelOnTouch:!1},this.validateOptions=function(ops){for(var prop in ops)self.defaults.hasOwnProperty(prop)&&Object.defineProperty(self.defaults,prop,{value:Object.getOwnPropertyDescriptor(ops,prop).value})},this.wrapperDamper,this.wrapperId,this.cancelOnTouch,this.wrapper,this.wrapperOffset=0,this.animateId,this.resizing=!1,this.active=!1,this.wrapperHeight,this.bodyHeight};Butter.prototype={init:function(options){options&&this.validateOptions(options),this.active=!0,this.resizing=!1,this.wrapperDamper=this.defaults.wrapperDamper,this.wrapperId=this.defaults.wrapperId,this.cancelOnTouch=this.defaults.cancelOnTouch,this.wrapper=document.getElementById(this.wrapperId),this.wrapper.style.position="fixed",this.wrapper.style.width="100%",this.wrapperHeight=this.wrapper.clientHeight,document.body.style.height=this.wrapperHeight+"px",window.addEventListener("resize",this.resize.bind(this)),this.cancelOnTouch&&window.addEventListener("touchstart",this.cancel.bind(this)),this.wrapperOffset=0,this.animateId=window.requestAnimationFrame(this.animate.bind(this))},wrapperUpdate:function(){var scrollY=null!=document.scrollingElement?document.scrollingElement.scrollTop:document.documentElement.scrollTop||0;this.wrapperOffset+=(scrollY-this.wrapperOffset)*this.wrapperDamper,this.wrapper.style.transform="translate3d(0,"+-this.wrapperOffset.toFixed(2)+"px, 0)"},checkResize:function(){this.wrapperHeight!=this.wrapper.clientHeight&&this.resize()},resize:function(){var self=this;self.resizing||(self.resizing=!0,window.cancelAnimationFrame(self.animateId),window.setTimeout((function(){self.wrapperHeight=self.wrapper.clientHeight,parseInt(document.body.style.height)!=parseInt(self.wrapperHeight)&&(document.body.style.height=self.wrapperHeight+"px"),self.animateId=window.requestAnimationFrame(self.animate.bind(self)),self.resizing=!1}),150))},animate:function(){this.checkResize(),this.wrapperUpdate(),this.animateId=window.requestAnimationFrame(this.animate.bind(this))},cancel:function(){this.active&&(window.cancelAnimationFrame(this.animateId),window.removeEventListener("resize",this.resize),window.removeEventListener("touchstart",this.cancel),this.wrapper.removeAttribute("style"),document.body.removeAttribute("style"),this.active=!1,this.wrapper="",this.wrapperOffset=0,this.resizing=!0,this.animateId="")}},root.butter=new Butter}(this);